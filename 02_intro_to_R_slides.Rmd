---
title: "Introduction to R"
author: "Arun Frey"
institute: "Department of Sociology, University of Oxford"
date: "08.11.2021"
output:
  xaringan::moon_reader:
    #css: xaringan-themer.css
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE, warning=FALSE}

library(xaringanthemer)
library(knitr)
library(tidyverse)
library(png)

#source("hooks.R")
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE, cache = TRUE)

#style_mono_accent(
#  base_color = "#1c5253",
#  header_font_google = google_font("Josefin Sans"),
#  text_font_google   = google_font("Montserrat", "300", "300i"),
#  code_font_google   = google_font("Fira Mono")
#)

theme_set(theme_bw())

starwars <- data.frame(starwars)

```

class: inverse, center, middle

# Recap of yesterday

---
# Vectors
```{r}
# vectors
x <- 1
x2 <- c(1, 2, 1, 1)
x3 <- c("hello", "hello", "course")

# vector functions
length(x2)

unique(x3)

sum(x2)
round(mean(x2), digits = 0)

paste(unique(x3), collapse = " ")

class(x3)
```

---
# Vector indexing 

```{r}
normal <- rnorm(1000, mean = 0, sd = 1)

normal[1:3]

normal_pos <- normal

normal_pos[normal_pos<=0] <- NA
```

---

```{r}
par(mfrow=c(1,2))
hist(normal)
hist(normal_pos)
```

---
# Dataframes
```{r}
# dataframes
class_df <- data.frame(
  "name" = c("Arun", "Mark", "Jenn"),
  "age" =  c(29, 28, 25), 
  "dep" = c("soc", "soc", "pol"), 
  "degree" = c("dphil", "dphil", "msc")
)

# read data
##read.csv, foreign::read.dta, read.delim
```

---

```{r}
# inspect data
head(class_df, 2)

tail(class_df, 2)

str(class_df)

summary(class_df)
```

---
class: inverse, middle, center

# Questions? 

---
# Indexing in dataframes

A dataframe consists of `n * m` observations. 

- `n`: number of rows
- `m`: number of columns

Just like with indexing vectors, you can also select individual observations in a dataframe, by specifying the row and the column of the observation `df[n, m]`. 

```{r}
df <- data.frame("var1" = c(1, 2, 3), "var2" = c(4, 5, 6))

df

# observation in first row, first column
df[1, 1]

# observation in third row, second column
df[3, "var2"]

# first observation, all columns
df[1, ]

```

---
class: inverse

# Quiz

What does each of the following lines return? 

```{r, eval = F}

df[1, 2]

df[, 2]

df[1,1]

df[c(1, 2), 1]

```


---
class: inverse

# Quiz

What does each of the following lines return? 

```{r, eval = T}
df[1, 2]

df[, 2]

df[1,1]

df[c(1, 2), 1]

```

---
# Accessing variables in dataframes

To access the names of variables (i.e. columns) in our data, use `names()`. 

```{r}
data("starwars")
names(starwars)
```

---

# Selecting variables using `$`

You can select variables using the `$` operator. 


```{r}
star_head <- data.frame(head(starwars, 3))

star_head$height

# is (almost) the same as
star_head[, "height"]

class(star_head$height)

class(star_head[, "height"])

class(star_head[["height"]])
```

---

# Selecting variables using `$`

Using these variables, you can then use that variable for descriptive statistics, using the functions you've learnt

```{r}
mean(starwars$height, na.rm = T)

# show first 5 unique species
unique(starwars$species)[1:5]

head(starwars[, c("name", "species")])
```

---

# Adding new variables

```{r}
survey <- data.frame("index" = c(1, 2, 3),
                     "name" = c("Mark", "Arun", "Jenn"))

survey$age <- c(28, 29, 25)

survey
```

---
# Slicing data with [, ]

#### Logical vectors

---
# Slicing with subset

---
class: inverse, middle, center

# Exercise



